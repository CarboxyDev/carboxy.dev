---
import { GithubIcon } from '@/components/icons/social-icons';
import ImageLightbox from '@/components/ImageLightbox.astro';
import { getFeaturedProjects } from '@/lib/config/projects';
import { ExternalLink } from 'lucide-react';

const projects = getFeaturedProjects();
---

<section id="projects" class="flex flex-col pt-20 lg:pt-32">
  <h2 class="text-2xl font-semibold tracking-tight text-foreground md:text-3xl font-heading">
    Projects
  </h2>

  <div class="mt-12">
    <div class="flex flex-col">
      {projects.map((project, index) => {
        return (
          <article
            class="group/card flex flex-col gap-6 py-16 lg:py-20 first:pt-0 border-t border-border/50 first:border-t-0 animate-fade-in-up"
            style={`animation-delay: ${index * 150}ms`}
          >
            <!-- Image -->
            <div class="w-full">
              <div class="overflow-hidden rounded-xl border border-border/50 bg-card/30 transition-all duration-300 group-hover/card:border-border group-hover/card:shadow-lg group-hover/card:shadow-black/5">
                <ImageLightbox
                  images={project.images}
                  alt={`${project.title} preview`}
                />
              </div>
            </div>

            <!-- Content -->
            <div class="space-y-4">
              <h3 class="group text-xl font-semibold text-foreground lg:text-2xl">
                <a
                  href={project.href}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex items-center gap-2 transition-colors hover:text-muted-foreground"
                >
                  {project.title}
                  <ExternalLink className="h-4 w-4 opacity-0 transition-all duration-200 group-hover:opacity-100 group-hover:translate-x-0.5" />
                </a>
              </h3>

              <p class="text-muted-foreground leading-relaxed">{project.description}</p>

              <div class="flex flex-wrap gap-2 pt-1">
                {project.techStack.map((tech) => (
                  <span class="inline-flex items-center rounded-md border border-border/50 bg-card/50 px-2.5 py-1 text-xs text-muted-foreground/80">
                    {tech}
                  </span>
                ))}
              </div>

              <div class="flex items-center gap-3 pt-2">
                <a
                  href={project.href}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex h-9 items-center gap-2 rounded-lg bg-primary px-4 text-sm font-medium text-primary-foreground transition-all duration-200 hover:bg-primary/90 hover:scale-[1.02]"
                >
                  View Live
                  <ExternalLink className="h-4 w-4" />
                </a>
                {project.github && (
                  <a
                    href={project.github}
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="View source code"
                    class="inline-flex h-9 w-9 items-center justify-center rounded-lg text-muted-foreground transition-all duration-200 hover:bg-accent hover:text-foreground hover:scale-105"
                  >
                    <GithubIcon className="h-5 w-5" />
                  </a>
                )}
              </div>
            </div>
          </article>
        );
      })}
    </div>
  </div>
</section>
