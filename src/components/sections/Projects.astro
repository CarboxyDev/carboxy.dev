---
import { GithubIcon } from '@/components/icons/social-icons';
import ImageLightbox from '@/components/ImageLightbox.astro';
import SectionHeading from '@/components/SectionHeading.astro';
import { Button } from '@/components/ui/button';
import { PrimaryButton } from '@/components/ui/primary-button';
import { getFeaturedProjects } from '@/lib/config/projects';
import { cn } from '@/lib/utils';
import { ExternalLink } from 'lucide-react';

const projects = getFeaturedProjects();
---

<section id="projects" class="flex flex-col pt-20 sm:mb-44 lg:pt-32">
  <SectionHeading title="Featured Projects" />

  <div class="mt-16">
    <div class="flex flex-col gap-y-24 sm:gap-y-32 lg:gap-y-40">
      {projects.map((project, index) => {
        const align = index % 2 === 0 ? 'left' : 'right';

        return (
          <article
            class={cn(
              'project-card flex flex-col gap-8 lg:gap-12',
              align === 'left' ? 'lg:flex-row' : 'lg:flex-row-reverse'
            )}
            style={`animation-delay: ${index * 0.2}s`}
          >
            <div
              class={cn(
                'flex-1 space-y-6',
                align === 'left' ? 'lg:mr-8' : 'lg:ml-8'
              )}
            >
              <div>
                <h3 class="group text-3xl font-bold text-white lg:text-4xl">
                  <a
                    href={project.href}
                    target="_blank"
                    class="inline-flex items-center gap-3 transition-all duration-300 hover:translate-x-1 hover:text-primary-400"
                  >
                    {project.title}
                    <ExternalLink className="h-6 w-6 opacity-0 transition-all duration-300 group-hover:scale-110 group-hover:opacity-100" />
                  </a>
                </h3>
              </div>

              <p class="max-w-lg leading-relaxed text-zinc-300">{project.description}</p>

              <div class="flex flex-wrap gap-2">
                {project.techStack.map((tech) => (
                  <span
                    class={cn(
                      'inline-flex items-center rounded-full border border-primary-500/20 bg-primary-500/10 px-3 py-1.5 text-sm font-medium text-primary-400 transition-colors hover:border-primary-500/30 hover:bg-primary-500/20 font-mono-badge'
                    )}
                  >
                    {tech}
                  </span>
                ))}
              </div>

              <div class="flex gap-3 pt-4">
                <PrimaryButton href={project.href} target="_blank">
                  <ExternalLink className="h-4 w-4" />
                  <span>View Project</span>
                </PrimaryButton>
                {project.github && (
                  <a href={project.github} target="_blank">
                    <Button
                      variant="outline"
                      className="group h-12 gap-2 border border-zinc-700/70 bg-zinc-800/50 px-6 font-semibold text-zinc-300 backdrop-blur-sm transition-all duration-300 hover:scale-105 hover:border-zinc-500 hover:bg-zinc-700/50 hover:text-white active:scale-95"
                    >
                      <GithubIcon className="size-5" />
                      <span>View Code</span>
                    </Button>
                  </a>
                )}
              </div>
            </div>

            <div class="max-w-2xl flex-1">
              <ImageLightbox
                images={project.images}
                alt={`${project.title} preview`}
              />
            </div>
          </article>
        );
      })}
    </div>
  </div>
</section>

<style>
  .project-card {
    opacity: 0;
    transform: translateY(40px);
    animation: fadeInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
